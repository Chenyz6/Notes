## 递归遍历目录：ls-R.c

	1. 判断命令行参数，获取用户要查询的目录名。	int argc, char *argv[1]
	
		argc == 1  --> ./
	
	2. 判断用户指定的是否是目录。 stat  S_ISDIR(); --> 封装函数 isFile() {   }
	
	3. 读目录： read_dir() { 
	
		opendir（dir）
	
		while （readdir（））{
	
			普通文件，直接打印
	
			目录：
				拼接目录访问绝对路径。sprintf(path, "%s/%s", dir, d_name) 
	
				递归调用自己。--》 opendir（path） readdir closedir
		}
	
		closedir（）
	
		}
		read_dir() --> isFile() ---> read_dir()





## dup 和 dup2： duplicate

dup（）    **复制**一份到新的文件描述符！！！



	int dup(int oldfd);		文件描述符复制。
	
		oldfd: 已有文件描述符
	
		返回：新文件描述符。
	
	int dup2(int oldfd, int newfd); 文件描述符复制。重定向。

![image-20230728135953760](文件系统笔记.assets/image-20230728135953760.png)



dup2（）

![image-20230728140606455](文件系统笔记.assets/image-20230728140606455.png)











## fcntl 函数实现 dup：

	int fcntl(int fd, int cmd, ....)
	
	cmd: F_DUPFD
	
	参3:  	被占用的，返回最小可用的。
	
		未被占用的， 返回=该值的文件描述符。
	
	传参了就是dup2	












​	